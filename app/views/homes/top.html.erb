<div class="container">
  <div class="row">
    <div class="col-12">
      <div class="text-center">
        <h1>Drinker × Drinker</h1>
        <h5 class="my-2">お酒専門のSNSサイト</h5>
      </div>
      <% unless @all_ranks.empty? %>
        <h2>ランキング順</h2>
        <div class="d-flex flex-wrap justify-content-around">

          <% @all_ranks.each.with_index(1) do |post, i| %>
            <div class="my-3">
              <h4 class="text-center">第<%= i %>位</h4>
              <div class="ranking-post-box">
                <p>タイトル: <%= link_to post.title, post_path(post) %><p>
                <%= attachment_image_tag post, :post_image, format: "jpeg", size: "250x300", class: "d-block mx-auto" %>
                <p>キャプション: <%= post.caption %></p>

                <div id="star-rate-<%= post.id %>">
                  <span class="mr-3">レビュー：<%= post.rate %></span>
                </div>
                <script>
                $('#star-rate-<%= post.id %>').raty({
                  size: 15,
                  starOff: '<%= asset_path('star-off.png') %>',
                  starOn: '<%= asset_path('star-on.png') %>',
                  starHalf: '<%= asset_path('star-half.png') %>',
                  half: true,
                  readOnly: true,
                  score: <%= post.rate %>,
                });
                </script>
                <p>場所: <%= post.location %></p>
                <div id="favorite_btn_<%= post.id %>">
                  <%= render "favorites/favorite-btn", post: post %>
                </div>
                <p>コメント数: <%= post.post_comments.count %></p>
                <p>投稿者: <%= link_to post.user.name, user_path(post.user.id) %></p>
              </div>
            </div>
          <% end %>
        </div>
      <% else %>
        <div class="d-flex flex-wrap justify-content-center">
          <%= render "posts/index", posts: @posts %>
        </div>
        <h2>新着順</h2>
        <div class="d-flex justify-content-center">
          <%= paginate @posts %>
        </div>
      <% end %>
    </div>
  </div>
</div>